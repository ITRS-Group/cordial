username: readonly
password: geneos
use-tls: true
allow-insecure: true
port: 7038

# configure the email server details in your user dv2html YAML file -
# which should have "0600" permissions - which is then merged with the
# YAML file in the working directory. Your user YAML file is normally
# ${HOME}/.config/geneos/dv2html.yaml

# email:
#   smtp: smtp.gmail.com
#   port: 465
#   username: user-email
#   password: ${enc:~/.config/geneos/keyfile.aes:+encs+XXX}
#   from: from-email
#   to: destination-email

text-template: ""

html-template1: |+
  <html>
    <head>
      {{if .CSSURL}}
      <link rel="stylesheet" href="{{.CSSURL}}">
      {{else if .CSSDATA}}
      <style>
      ${config:css-data}
      </style>
      {{end}}
    </head>
    <body>
      {{range $index, $dataview := .Dataviews}}
      <h1>{{ .Name }}</h1>
      <h2>{{ .XPath }}</h2>
      <p>Sample Time: {{ .SampleTime }}</p>
      <h2>Headlines</h2>
      <table id="headlines">
        <tbody>
      {{range $headline, $values := .Headlines}}<tr id="headline-{{$headline}}">
          <th>{{$headline}}</th>
            <td class="headline {{$values.Severity}}">{{$values.Value}}</td>{{end}}
          </tr>
        </tbody>
      </table>
      <h2>Table</h2>
      <table id="cells">
        <thead>
      {{range .Columns}}    <th>{{.}}</th>{{end}}
        </thead>
        <tbody>
      {{range $row, $cells := .Table}}<tr id="row-{{$row}}">
      <th>{{$row}}</th>
      {{range $i, $column := $dataview.Columns}}
      {{if ne $i 0}}{{with (index $cells $column)}}<td class="cell {{.Severity}}">{{.Value}}</td>{{end}}{{end}}
      {{end}}
      </tr>{{end}}
        </tbody>
      </table>
      {{end}}
      <h2>Environment Vars:</h2>
      <table class="env">
        <tbody>
          {{range $key, $value := .Env}}<tr><th>{{$key}}</th><td>{{$value}}</td></tr>{{end}}
        </tbody>
      </table>
    </body>
  </html>

css-data: |+
  .CRITICAL {
      background-color: crimson;
      color: white;
  }

  .WARNING {
      background-color: gold;
      color: black;
  }

  .OK {
      background-color: limegreen;
      color: white;
  }

  .UNDEFINED {
      background-color: lightgrey;
      color: black;
  }

  table,
  th,
  td {
      border: 1px solid white;
      border-collapse: collapse;
      padding: 5px;
      text-align: left;
  }

  th {
      background-color: dimgrey;
  }

  ul {
      width: 50%;
      list-style-type: none;
      list-style-position: inside;
  }

  span .headline {
      text-align: right
  }

  .dropdown {
      position: relative;
      display: inline-block;
  }

  .dropdown-content {
      display: none;
      position: absolute;
      background-color: grey;
      min-width: 160px;
      /* box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); */
      padding: 12px 16px;
      z-index: 1;
  }

  .dropdown:hover .dropdown-content {
      display: block;
  }